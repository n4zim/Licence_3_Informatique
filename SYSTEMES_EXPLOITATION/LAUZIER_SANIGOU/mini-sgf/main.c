
/*
**  main.c
**
**  Utilisation des fonctions du mini SGF.
**
**  04/04/2007
*/

#include <stdio.h>
#include <stdlib.h>

#include "sgf-disk.h"
#include "sgf-fat.h"
#include "sgf-dir.h"
#include "sgf-io.h"

int main() {
	OFILE* file;
	int c;
	
	init_sgf();
	
	// printf("-------------------------------\n");
	// printf("      Listing du disque\n");
	// printf("-------------------------------\n");
	// list_directory();
	// printf("\n\n*******************************\n\n\n");

	// printf("-------------------------------\n");
	// printf("   Ecriture fichier essai.txt\n");
	// printf("-------------------------------\n\n");

	// file = sgf_open("essai.txt", WRITE_MODE);
	// sgf_puts(file, "Ceci est un petit texte qui occupe\n");
	// sgf_puts(file, "quelques blocs sur ce disque fictif.\n");
	// sgf_puts(file, "Le bloc faisant 128 octets, il faut\n");
	// sgf_puts(file, "que je remplisse pour utiliser\n");
	// sgf_puts(file, "plusieurs blocs.\n");
	// sgf_close(file);
	
	// printf("\n\n*******************************\n\n\n");

	// printf("-------------------------------\n");
	// printf("   Lecture fichier essai.txt\n");
	// printf("-------------------------------\n\n");
	// file = sgf_open("essai.txt", READ_MODE);
	// // sgf_seek(file, 0);
	// int pos = 0;
	// while(sgf_seek(file, pos++) == 0)
	// {
	// 	c = sgf_getc(file);
	// 	putchar(c);
	// }
	// // while ((c = sgf_getc(file)) > 0) {
	// //  	putchar(c);
	// // }
	// sgf_close(file);
	// sgf_remove();

	// printf("\n\n*******************************\n\n\n");

	// printf("-------------------------------\n");
	// printf("   Mode Ajout\n");
	// printf("-------------------------------\n\n");
	
	// int i;
	// file = sgf_open("append.txt", WRITE_MODE);
	// sgf_close(file);		
	// for(i = 0; i < 500 ; i++)
	// {
	// 	file = sgf_open("append.txt", APPEND_MODE);		
	// 	sgf_putc(file, 'Z');	
	// 	sgf_close(file);
	// }

	// file = sgf_open("append.txt", READ_MODE);

	// int pos = 0;
	// while(sgf_seek(file, pos++) == 0)
	// {
	// 	c = sgf_getc(file);
	// 	putchar(c);
	// }

	// sgf_close(file);
	
	// printf("\n\n*******************************\n\n\n");

	printf("-------------------------------\n");
	printf("   WRITE \n");
	printf("-------------------------------\n\n");
	
	file = sgf_open("write.txt", WRITE_MODE);
	sgf_write(file,"Ceci est un petit texte qui occupe quelques blocs." , 50);
	sgf_close(file);
	file = sgf_open("write.txt", READ_MODE);

	int pos = 0;
	while(sgf_seek(file, pos++) == 0)
	{
		c = sgf_getc(file);
		putchar(c);
	}

	sgf_close(file);
	
	printf("\n\n*******************************\n\n\n");

	
	return (EXIT_SUCCESS);
	}

